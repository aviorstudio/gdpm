---
import RootLayout from './RootLayout.astro';

interface Props {
  status?: string;
  tone?: 'muted' | 'error' | 'success';
  mode: 'signin' | 'register';
  action?: string;
}

const { status = '', tone = 'muted', mode, action } = Astro.props as Props;
const title = 'Godot Plugin Manager';
const headline = 'Addons simplified';
const formAction = action ?? (mode === 'signin' ? '/api/auth/signin' : '/register');
---

<RootLayout>
	<section class="flex justify-center px-4 py-12 md:py-16">
		<div class="flex w-full max-w-2xl flex-col items-center gap-4 text-center">
			<h1 class="text-3xl font-semibold tracking-tight text-slate-900 md:text-4xl">{title}</h1>
			<p class="text-lg font-semibold text-slate-900">{headline}</p>

			<form
				class="w-full max-w-xl space-y-5 rounded-2xl border border-slate-200 bg-white p-6 text-left shadow-sm"
				method="post"
				action={formAction}
			>
				<div class="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-100 p-1">
					<a class:list={{
							'rounded-full px-4 py-2 text-sm font-semibold transition': true,
							'bg-white text-slate-900 shadow-sm': mode === 'signin',
							'text-slate-600 hover:text-slate-800': mode !== 'signin',
						}} href="/signin">
						Sign in
					</a>
					<a class:list={{
							'rounded-full px-4 py-2 text-sm font-semibold transition': true,
							'bg-white text-slate-900 shadow-sm': mode === 'register',
							'text-slate-600 hover:text-slate-800': mode !== 'register',
						}} href="/register">
						Create account
					</a>
				</div>

				<div class="grid gap-4">
					<slot />
				</div>

				<button
					class="w-full rounded-xl bg-sky-600 px-4 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-sky-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600"
					type="submit"
				>
					{mode === 'signin' ? 'Sign in' : 'Create account'}
				</button>
				<p class:list={{
						'min-h-[20px] text-sm': true,
						'text-slate-500': tone === 'muted',
						'text-red-600': tone === 'error',
						'text-green-600': tone === 'success',
					}}>
					{status}
				</p>
			</form>
			<slot name="overlay" />
		</div>
	</section>
</RootLayout>
