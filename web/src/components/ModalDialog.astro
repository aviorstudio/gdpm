---
interface Props {
	id: string;
	title: string;
	description?: string;
	open?: boolean;
	size?: 'md' | 'lg' | 'xl';
	titleId?: string;
}

const {
	id,
	title,
	description = '',
	open = false,
	size = 'md',
	titleId = `${id}-title`,
} = Astro.props as Props;

const maxWidthClass = {
	md: 'max-w-md',
	lg: 'max-w-lg',
	xl: 'max-w-xl',
}[size];

const hasDescriptionSlot = Astro.slots.has('description');
const shouldRenderDescription = hasDescriptionSlot || Boolean(description);

const dialogAttributes = open ? { open: true } : {};
const dialogDisplayClass = open ? 'grid' : 'hidden';
---

<dialog
	id={id}
	{...dialogAttributes}
	aria-labelledby={titleId}
	class={`fixed inset-0 z-50 m-0 ${dialogDisplayClass} h-[100dvh] w-[100vw] place-items-center overflow-y-auto border-0 bg-slate-900/40 p-4 outline-none backdrop-blur-sm`}
>
	<div class={`w-full ${maxWidthClass} rounded-2xl border border-slate-200 bg-white p-6 text-left shadow-xl`}>
		<h2 id={titleId} class="text-lg font-semibold text-slate-900">
			{title}
		</h2>

		{
			shouldRenderDescription && (
				<p class="mt-1 text-sm text-slate-600">
					{hasDescriptionSlot ? <slot name="description" /> : description}
				</p>
			)
		}

		<div class="mt-5">
			<slot />
		</div>
	</div>
</dialog>
