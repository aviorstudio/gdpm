---
type TitleLink = {
  label: string;
  href: string;
  external?: boolean;
};

type TitlePart = {
  label: string;
  href?: string;
  external?: boolean;
};

type TitleAction = {
  label: string;
  href: string;
};

interface Props {
  title?: string;
  titleParts?: TitlePart[];
  subtitle?: string;
  subtitleLink?: TitleLink;
  action?: TitleAction;
}

const { title = '', titleParts, subtitle = '', subtitleLink, action } = Astro.props as Props;

const primaryActionClasses =
  'inline-flex items-center justify-center rounded-xl bg-sky-600 px-4 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-sky-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600';

const titleLinkClasses = 'text-slate-900 hover:underline';
const subtitleLinkClasses = 'font-semibold text-slate-900 hover:underline';

const shouldRenderTitle = Boolean(titleParts?.length) || Boolean(title);
const shouldRenderSubtitle = Boolean(subtitleLink) || Boolean(subtitle);
const shouldRenderActions = Boolean(action);
---

<section
  class="mx-auto flex w-[calc(100%-2rem)] max-w-5xl flex-col gap-4 text-center sm:text-left md:flex-row md:items-end md:justify-between"
>
  <div class="flex flex-col gap-2">
    {shouldRenderTitle && (
      <h1 class="text-3xl font-semibold tracking-tight text-slate-900 md:text-4xl">
        {
          titleParts?.length
            ? titleParts.map((part, index) => (
              <Fragment>
                {index > 0 && (
                  <>
                    {' '}
                    <span class="text-slate-400">/</span>{' '}
                  </>
                )}
                {
                  part.href ? (
                    <a
                      class={titleLinkClasses}
                      href={part.href}
                      target={part.external ? '_blank' : undefined}
                      rel={part.external ? 'noopener noreferrer' : undefined}
                    >
                      {part.label}
                    </a>
                  ) : (
                    <span>{part.label}</span>
                  )
                }
              </Fragment>
            ))
            : title
        }
      </h1>
    )}
    {
      shouldRenderSubtitle && (
        <p class="mx-auto max-w-3xl text-base text-slate-600 sm:mx-0">
          {
            subtitleLink ? (
              <a
                class={subtitleLinkClasses}
                href={subtitleLink.href}
                target={subtitleLink.external ? '_blank' : undefined}
                rel={subtitleLink.external ? 'noopener noreferrer' : undefined}
              >
                {subtitleLink.label}
              </a>
            ) : (
              subtitle
            )
          }
        </p>
      )
    }
  </div>

  {
    shouldRenderActions && (
      <a class={primaryActionClasses} href={action?.href}>
        {action?.label}
      </a>
    )
  }
</section>
